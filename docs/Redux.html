<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

    <title>Лекции по фронтенду</title>
    <link rel="shortcut icon" href="./favicon.ico"/>
    <link rel="stylesheet" href="./dist/reveal.css" />
    <link rel="stylesheet" href="./dist/theme/sky.css" id="theme" />
    <link rel="stylesheet" href="./css/highlight/zenburn.css" />

  </head>
  <body>
    <div class="reveal">
      <div class="slides"><section  data-markdown><script type="text/template">## React + Redux

![React + Redux](assets/redux/redux-logo.jpeg)

[Дмитрий Вайнер](mailto:dmitry.weiner@gmail.com)

[видео]()
</script></section><section  data-markdown><script type="text/template">
### State management
* Можно хранить состояние приложения размазанным по компонентам.
* Плюсы:
  * Просто. Не надо думать.
  * Всё под рукой.
* Минусы:
  * Приходится пробрасывать потомками стейт и методы изменения.
  * Может нарушиться консистентность.
  * Изменения очень дорогие.
</script></section><section  data-markdown><script type="text/template">
## Идея

![data flow](assets/redux/data-flow.png)
</script></section><section  data-markdown><script type="text/template">
### Redux
* Библиотека управления состоянием.
* Авторы: [Dan Abramov](https://github.com/gaearon) и [Andrew Clark](https://github.com/acdlite).
* Дата первого релиза: 2.06.2015.
* Текущая версия: 4.0.
* [Документация](https://redux.js.org/api/api-reference).
* [Учебникъ](https://redux.js.org/tutorials/fundamentals/part-1-overview).
</script></section><section  data-markdown><script type="text/template">
### Схема работы

![схема работы](assets/redux/redux-diagram.gif)
</script></section><section  data-markdown><script type="text/template">
## Плюсы и минусы
* Плюсы:
  * Состояние приложения лежит в одном единственном месте.
  * Изменения атомарные и последовательные.
  * Можно восстановить историю изменений.
* Минусы:
  * Много кода.
  * Много новых файлов.
  * Можно запутаться в изменениях стейта.
</script></section><section  data-markdown><script type="text/template">
## Подключение 
* Установка:
```shell
npm i redux react-redux
```
* Создание стора (в ```store.js```):
```js
import { createStore } from 'redux';
const store = createStore(reducer);
export default store;
```
* Подключение в приложение (в ```index.js```):
```js
const rootElement = document.getElementById('root');
ReactDOM.render(
  <Provider store={store}>
    <TodoApp />
  </Provider>,
  rootElement
);
```
</script></section><section  data-markdown><script type="text/template">
## State-first подход
</script></section><section  data-markdown><script type="text/template">
### Actions
</script></section><section  data-markdown><script type="text/template">
### Action creators
</script></section><section  data-markdown><script type="text/template">
## Reducer
</script></section><section  data-markdown><script type="text/template">
### Компоновка редьюсеров
</script></section><section  data-markdown><script type="text/template">
### Селекторы
</script></section><section  data-markdown><script type="text/template">
## Использование с React.js
</script></section><section  data-markdown><script type="text/template">
## Компоненты классы
</script></section><section  data-markdown><script type="text/template">
## Функциональные компоненты
</script></section><section  data-markdown><script type="text/template">
## Селекторы
</script></section><section  data-markdown><script type="text/template">
## Диспетчер
</script></section><section  data-markdown><script type="text/template">
### Middleware
</script></section><section  data-markdown><script type="text/template">
## Расширение браузера для Redux
</script></section><section  data-markdown><script type="text/template">
## Варианты разумной организации файлов и папок
* В одном файле.
* В папке redux:
* По фичам.
</script></section><section  data-markdown><script type="text/template">
## Что можно улучшить?
* А как делать асинхронные запросы в сеть?
  * Redux Thunk!
* Запутался, какой экшон следует за каким?
  * Redux Saga!
* Селекторы пересчитываются при каждом рендере, помогити!
  * Reselect!
* Слишком много разрозненных файлов, можно это будет структура с мутаторами и экшенами?
  * Redux Toolkit!
  </script></section><section  data-markdown><script type="text/template">
## Полезные ссылки
* [Лекция Эндрю Кларка про реакт.](https://www.youtube.com/watch?v=ZVYVtUFDf28)
  https://tproger.ru/translations/redux-for-beginners/
</script></section></div>
    </div>

    <script src="./dist/reveal.js"></script>

    <script src="./plugin/markdown/markdown.js"></script>
    <script src="./plugin/highlight/highlight.js"></script>
    <script src="./plugin/zoom/zoom.js"></script>
    <script src="./plugin/notes/notes.js"></script>
    <script src="./plugin/math/math.js"></script>
    <script>
      function extend() {
        var target = {};
        for (var i = 0; i < arguments.length; i++) {
          var source = arguments[i];
          for (var key in source) {
            if (source.hasOwnProperty(key)) {
              target[key] = source[key];
            }
          }
        }
        return target;
      }

      // default options to init reveal.js
      var defaultOptions = {
        controls: true,
        progress: true,
        history: true,
        center: true,
        transition: 'default', // none/fade/slide/convex/concave/zoom
        plugins: [
          RevealMarkdown,
          RevealHighlight,
          RevealZoom,
          RevealNotes,
          RevealMath
        ]
      };

      // options from URL query string
      var queryOptions = Reveal().getQueryHash() || {};

      var options = extend(defaultOptions, {}, queryOptions);
    </script>


    <script>
      Reveal.initialize(options);
    </script>
  </body>
</html>
